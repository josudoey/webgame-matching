"use strict";(self.webpackChunkwebgame_matching=self.webpackChunkwebgame_matching||[]).push([[687],{687:(t,e,n)=>{n.r(e),n.d(e,{default:()=>m});var i={};n.r(i),n.d(i,{render:()=>a,staticRenderFns:()=>r});var s={};n.r(s),n.d(s,{render:()=>c,staticRenderFns:()=>o});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container-fluid px-0",on:{paste:function(e){return e.preventDefault(),t.onPaste.apply(null,arguments)},drop:function(e){return e.preventDefault(),t.onDrop.apply(null,arguments)},dragover:function(t){t.preventDefault()}}},[n("nav",{staticClass:"navbar navbar-dark bg-dark"},[n("div",{staticClass:"navbar-brand d-flex"},[n("div",{staticClass:"mr-1"},[t._v("記憶大挑戰")]),n("open-image",{staticClass:"mb-0",on:{load:t.insert}},[t._v("上傳")]),t.items.length?[t.isAllFlipped()?n("div",{staticClass:"btn btn-primary btn-sm my-auto",on:{click:function(e){return t.flipAll(!1)}}},[t._v("蓋牌")]):t._e(),t.isAllFlipped()?t._e():n("div",{staticClass:"btn btn-primary btn-sm my-auto",on:{click:function(e){return t.flipAll(!0)}}},[t._v("亮牌")]),n("div",{staticClass:"btn btn-warning btn-sm my-auto",on:{click:t.reset}},[t._v("重置")]),n("b-form-input",{staticClass:"my-auto ml-1",attrs:{type:"range",min:"100",max:"400",step:"5"},model:{value:t.size,callback:function(e){t.size=t._n(e)},expression:"size"}}),t.isAllFlipped()?t._e():n("div",{staticClass:"btn btn-primary btn-sm my-auto",on:{click:t.makeAnswer}},[t._v("出題")])]:t._e()],2)]),n("div",{staticClass:"container-fluid px-0 d-flex flex-wrap justify-content-around align-items-center",staticStyle:{"min-height":"calc(100vh - 60px)"}},t._l(t.items,(function(e,i){return n("div",{key:e._uid,staticClass:"game-card mt-2",style:{width:t.size+"px",height:t.size+"px"}},[n("transition",{staticClass:"d-relative",attrs:{name:"flip"}},[e.flipped?n("div",{key:"front",staticClass:"card pb-0 d-absolute game-card justify-content-around align-items-center",style:{width:t.size+"px",height:t.size+"px"},on:{click:function(e){return t.choice(i)}}},[n("img",{staticClass:"mw-100 mh-100",attrs:{src:e.src}})]):n("div",{key:"back",staticClass:"card p-0 d-absolute btn",attrs:{src:e.src},on:{click:function(e){return t.choice(i)}}},[n("div",{staticClass:"w-100 game-card jumbotron p-0 text-center mb-0 d-flex justify-content-around align-items-center h1",style:{width:t.size+"px",height:t.size+"px"}},[t._v(t._s(e.no))])])])],1)})),0)])},r=[],l=n(339),c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.id?n("div",{staticClass:"d-inline-block"},[n("input",{staticClass:"d-none",attrs:{id:t.id,type:"file",accept:"image/*",multiple:""},on:{change:t.change}}),n("label",{staticClass:"btn btn-secondary btn-sm mb-0",attrs:{for:t.id}},[n("b-icon-card-image")],1)]):t._e()},o=[];const d={...s,props:[],data:function(){return{id:""}},created(){this.id=`img-${this._uid}`},mounted(){},methods:{change(t){const e=t.srcElement;for(const t of e.files)this.readFile(t);e.value=""},readFile:function(t){const e=this,n=new window.FileReader;n.addEventListener("load",(function(){const t=n.result,i=new window.Image;i.onload=function(){const{width:n,height:s}=this;Object.assign(e,{width:n,height:s,url:t}),e.$emit("load",i,e)},i.src=t}),!1),t&&n.readAsDataURL(t)}}},m={...i,components:{OpenImage:d},data:()=>({size:200,answerIndex:null,items:[]}),mounted(){n.e(368).then(n.bind(n,368))},methods:{onPaste(t){[...t.clipboardData.files].forEach((t=>{this.parseImg(t)}))},onDrop(t){[...t.dataTransfer.files].forEach((t=>{this.parseImg(t)}))},parseImg:function(t){const e=this,n=new window.FileReader;n.addEventListener("load",(function(){const t=n.result,i=new window.Image;i.onload=function(){e.insert(i)},i.src=t}),!1),t&&n.readAsDataURL(t)},insert(t){if(!t)return;const e=this.items.length;this.items.push({id:e,flipped:!1,src:t.src}),this.reset()},makeAnswer(){const{items:t}=this;let e,n;for(;!e||e.flipped;)n=this.answerIndex=Math.floor(Math.random()*t.length),e=t[n];l.fire({customClass:{htmlContainer:"h-75",image:""},didOpen:()=>{l.getContainer().onclick=l.close},showConfirmButton:!1,title:"請尋找",icon:"question",html:`<img src="${e.src}" class="h-100">`})},choice(t){const{items:e,answerIndex:n}=this,i=e[t];i.flipped||(i.flipped=!0,t===n&&l.fire({title:"答對了!",icon:"success",didOpen:()=>{l.getContainer().onclick=l.close},showConfirmButton:!1}))},isAllFlipped(){const{items:t}=this;return t.filter((t=>t.flipped)).length===t.length},flipAll(t){const{items:e}=this;for(let n=0;n<e.length;n++)e[n].flipped=t},reset(){const t=this.items,e=t.length;for(let n=0;n<e;n++)for(let i=n+1;i<e;i++){const i=parseInt(Math.random()*e),s=t[i];t[i]=t[n],t[n]=s}Object.assign(this,{first:null,second:null});for(let n=0;n<e;n++)t[n].no=n+1,t[n].flipped=!1}}}}}]);